cmake_minimum_required(VERSION 3.15)
project(TP3)



set(COMMON_COMPIL_FLAGS
	$<$<CONFIG:Debug>:-Wall -Wextra -g -fsanitize=address>
   	$<$<CONFIG:Release>:-Wall -Wextra -DNDEBUG -O2 -march=native>
)

add_subdirectory(include)

add_executable(main src/main.cpp)
add_executable(test_runner tests/test_runner.cpp)

target_link_libraries(main PRIVATE simulator)
target_link_libraries(test_runner PRIVATE simulator)

find_package(GTest REQUIRED)


target_link_libraries(test_runner PRIVATE simulator GTest::GTest GTest::Main)


enable_testing()
find_package(GTest REQUIRED)

add_test(test main)

gtest_discover_tests(test_runner)



